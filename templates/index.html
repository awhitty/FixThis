<!DOCTYPE html> 
<html> 
<head> 
	<title>FixThis</title> 

	<meta name="apple-mobile-web-app-capable" content="yes">
 	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 

	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
	<link rel="stylesheet/less" type="text/css" href="/static/less/master.less">

	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.3.0/less-1.3.0.min.js"></script>
	<script src="http://malsup.github.com/jquery.form.js"></script> 
</head> 
<body>
<div id="login" data-role="page" data-title="Dashboard">
	<div data-role="content">
		<h1 class="center">FixThis</h1>
		<br><br>
		<div id="login-buttons" data-role="controlgroup" data-type="horizontal" class="center">
			<a id="login-button"    href="#" data-role="button" data-theme="c" data-transition="flow">Sign in</a>
			<a id="register-button" href="#" data-role="button" data-theme="c" data-transition="flow">Register</a>
			<a id="skip-button" 	href="#dashboard" data-role="button" data-theme="c" data-transition="flow">Skip</a>
		</div>

		<div id="bottom-half">
			<form id="login-form" action="/login/" method="post" class="ui-body ui-body-a ui-corner-all ui-hide-label">
				<label for="username">Username/email:</label>
				<input type="text" name="username" id="username" value="" placeholder="Username/email"/>
				<label for="password">Password:</label>
				<input type="password" name="password" id="password" value="" placeholder="Password"/>
				<button type="submit" data-theme="a" class="ui-btn-hidden" data-disabled="false">Log in</button>
			</form>
	
			<form id="register-form" action="/register/" method="post" class="ui-body ui-body-a ui-corner-all ui-hide-label">
				<label for="username">Username (optional):</label>
				<input type="text" name="username" id="username" value="" placeholder="Username (optional)"/>
				<label for="username">Email:</label>
				<input type="text" name="email" id="email" value="" placeholder="Email"/>
				<label for="password">Password:</label>
				<input type="password" name="password" id="password" value="" placeholder="Password"/>
				<label for="password">Password (again):</label>
				<input type="password" name="password" id="password" value="" placeholder="Password (again)"/>
				<button type="submit" data-theme="b" class="ui-btn-hidden" data-disabled="false">Register</button>
				<button type="submit" data-theme="c" class="ui-btn-hidden" data-disabled="false">Cancel</button>
			</form>
		</div>

		<script type="text/javascript">
			// TODO: We need to clean this code up
			$('#login-form').hide()
			$('#register-form').hide()

			$('#login-button').click(function(e) {
				$('#login-buttons a').removeClass('ui-btn-active')
				$(this).addClass('ui-btn-active')
				$('#login-form').show()
				$('#register-form').hide()
			})

			$('#register-button').click(function(e) {
				$('#login-buttons a').removeClass('ui-btn-active')
				$(this).addClass('ui-btn-active')
				$('#login-form').hide()
				$('#register-form').show()
			})
		</script>
	</div>

</div>

<div id="dashboard" data-role="page" data-title="Dashboard">

	<div class="toolbar" data-role="header" data-position="fixed">
		<h1>Dashboard</h1>
		<!-- <a href="#" data-transition="slidedown"><i class="icon-question"></i></a> -->
	</div>

	<div data-role="content">
		<div class="icon-grid" data-role="navbar" data-iconpos="top">
		    	<ul>
		    	    <li><a href="#submit"   class="ui-btn" data-transition="flow"><i class="icon-plus"></i>Submit</a></li>
		    	    <li><a href="#map"      class="ui-btn" data-transition="flow"><i class="icon-map-marker"></i>Map</a></li>
		    	    <li><a href="#list"     class="ui-btn" data-transition="flow"><i class="icon-list"></i>List</a></li>
		    	    <li><a href="#search"   class="ui-btn" data-transition="flow"><i class="icon-search"></i>Search</a></li>
		    	    <li><a href="#profile"  class="ui-btn" data-transition="flow"><i class="icon-user"></i>Profile</a></li>
		    	    <li><a href="#settings" class="ui-btn" data-transition="flip"><i class="icon-cogs"></i>Settings</a></li>
		    	    <li><a href="#login"	class="ui-btn" data-transition="flow"><i class="icon-signout"></i>Logout</a></li>
		    	</ul>
		</div>
	</div>

</div>

<div id="submit" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1>Submit</h1>
		<a href="#dashboard" data-transition="pop"><i class="icon-th"></i></a>
	</div>

	<div data-role="content">
		<div class="submit-form" data-role="fieldcontain">
			<div href="#" id="upload_override" class="add_image">
				<i class="icon-camera"></i>
				<h2>Tap to add photo</h2>
			</div>
			<form id="photo-input-form" action="/preview/" method="post">
				<input id="photo-input" name="image" type="file" accept="image/*" capture="camera" class="ui-btn" />
			</form>
			<br />
		    	<textarea type="text" name="name" id="basic" value="" placeholder="Description"></textarea>
		    	<br /><br />
		    	<label for="slider-1" class="muted">Urgency:</label>
			<input type="range" name="urgency_slider" id="submit_urgency_slider" class="slider" value="5" min="0" max="10" />
			
		</div>
	</div>
	<div data-role="footer" data-position="fixed" class="">
		<div data-role="navbar">
			<ul>
				<li><a href="#" data-rel="back" data-theme="c"><i class="icon-remove"></i> Cancel</a></li>
				<li><a href="#" data-theme="b"><i class="icon-plus"></i> Submit</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="map" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1>Map</h1>
		<a href="#dashboard" data-transition="pop"><i class="icon-th"></i></a>
		<a href="#submit" data-transition="slidedown"><i class="icon-plus"></i> Submit</a>
	</div>

	<section id="wrapper">
	 
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
	    <article>
	      <p id="statusBlock"><span id="status">Please wait whilst we try to locate you...</span></p>
	    </article>
	<script>
	function success(position) {
	  var s = document.querySelector('#status');
	 
	  if (s.className == 'success') {
	    return;
	  }
	 
	  s.innerHTML = "found you!";
	  s.className = 'success';

	  var statusBlock = document.getElementById("statusBlock");
	  statusBlock.style.display="none";

	 
	  var mapcanvas = document.createElement('div');
	  mapcanvas.id = 'mapcanvas';
	  mapcanvas.style.height = '500px'; //need to dynamically size to size of viewable browser area
	  mapcanvas.style.width = '560px';
	 
	  document.querySelector('article').appendChild(mapcanvas);
	 
	  var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	  var myOptions = {
	    zoom: 15,
	    center: latlng,
	    mapTypeControl: false,
	    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
	    mapTypeId: google.maps.MapTypeId.ROADMAP
	  };
	  var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
	 
	  var marker = new google.maps.Marker({
	      position: latlng,
	      map: map,
	      title:"You are here!"
	  });
	}
	 
	function error(msg) {
	  var s = document.querySelector('#status');
	  s.innerHTML = typeof msg == 'string' ? msg : "failed";
	  s.className = 'fail';
	 
	  // console.log(arguments);
	}
	 
	if (navigator.geolocation) {
	  navigator.geolocation.getCurrentPosition(success, error);
	} else {
	  error('not supported');
	}
	 
	</script>
	</section>
	<div data-role="footer" data-position="fixed">
		<div data-role="navbar">
			<ul>
				<li><a href="#map" class="ui-btn-active ui-state-persist" data-transition="none"><i class="icon-map-marker"></i> Map</a></li>
				<li><a href="#list" data-transition="none"><i class="icon-list"></i> List</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="list" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1>List</h1>
		<a href="#dashboard" data-transition="pop"><i class="icon-th"></i></a>
		<a href="#submit" data-transition="slidedown"><i class="icon-plus"></i> Submit</a>
	</div>

	<div data-role="content">

		<!-- TODO: Add iScroll/pull-to-refresh support for listview -->
		<ul data-role="listview">
			<li data-role="list-divider">Your fixes</li>
			<li>
				<a href="#detail" class="ui-link-inherit" data-transition="pop">
					<img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-p.jpg" class="ui-li-thumb">
					<h3 class="ui-li-heading">Broken sink</h3>
					<p class="muted ui-li-desc">(0.3 miles from your location)</p>
				</a>
			</li>
			<li>
				<a href="#detail" class="ui-link-inherit">
					<img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-p.jpg" class="ui-li-thumb">
					<h3 class="ui-li-heading">Door hinge needs grease</h3>
					<p class="muted ui-li-desc">(0.6 miles from your location)</p>
				</a>
			</li>
			<li>
				<a href="#detail" class="ui-link-inherit">
					<img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-p.jpg" class="ui-li-thumb">
					<h3 class="ui-li-heading">Sprinkler leaking</h3>
					<p class="muted ui-li-desc">(1.2 miles from your location)</p>
				</a>
			</li>
			<li data-role="list-divider">Nearby fixes</li>
			<li>
				<a href="#detail" class="ui-link-inherit" data-transition="pop">
					<img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-p.jpg" class="ui-li-thumb">
					<h3 class="ui-li-heading">Broken sink</h3>
					<p class="muted ui-li-desc">(0.3 miles from your location)</p>
				</a>
			</li>
			<li>
				<a href="#detail" class="ui-link-inherit">
					<img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-p.jpg" class="ui-li-thumb">
					<h3 class="ui-li-heading">Door hinge needs grease</h3>
					<p class="muted ui-li-desc">(0.6 miles from your location)</p>
				</a>
			</li>
			<li>
				<a href="#detail" class="ui-link-inherit">
					<img src="http://jquerymobile.com/demos/1.2.0/docs/lists/images/album-p.jpg" class="ui-li-thumb">
					<h3 class="ui-li-heading">Sprinkler leaking</h3>
					<p class="muted ui-li-desc">(1.2 miles from your location)</p>
				</a>
			</li>
		</ul>
	</div>

	<div data-role="footer" data-position="fixed">
		<div data-role="navbar">
			<ul>
				<li><a href="#map" data-transition="none"><i class="icon-map-marker"></i> Map</a></li>
				<li><a href="#list" class="ui-btn-active ui-state-persist" data-transition="none"><i class="icon-list"></i> List</a></li>
			</ul>
		</div>
	</div>

</div>

<div id="detail" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1>Broken sink</h1>
		<a href="#" data-rel="back"><i class="icon-caret-left"></i> Back</a>
	</div>

	<div data-role="content">
		<h1>This is where users will search for FixThis requests!</h1>
	</div>

</div>

<div id="search" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1>Search</h1>
		<a href="#dashboard" data-transition="pop"><i class="icon-th"></i></a>
	</div>

	<div data-role="content">
		<h1>This is where users will search for FixThis requests!</h1>
	</div>

</div>

<div id="profile" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1><i class="icon-user"></i> Profile Name</h1>
		<a href="#dashboard" data-transition="pop"><i class="icon-th"></i></a>
	</div>

	<div data-role="content">
		<h1>This is where we can view a user's activity!</h1>
	</div>

</div>

<div id="settings" data-role="page">

	<div class="toolbar" data-role="header" data-position="fixed" data-theme="b">
		<h1>Settings</h1>
		<a href="#dashboard" data-transition="pop"><i class="icon-th"></i></a>
	</div>

	<div data-role="content">
		<h1>This is where we can view a user's activity!</h1>
	</div>

</div>

<script type="text/javascript">
	// This snippet allows us to pull up the image selector when a user taps the "Tap to add image" icon
	$('#upload_override').click(function(e) { $('#photo-input').click() })

	$('#photo-input').on('change', function () {
		$(this).parent().ajaxSubmit(function(d) {
			$('#upload_override').css('background-image', 'url(\''+d+'\')');
		})
	})


</script>
</body>
</html>
